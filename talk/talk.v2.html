<!DOCTYPE html>
<html>
  <head>
    <title>Property-based testing -- by Nicolas DUBIEN</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/reveal.js/3.0.0/css/reveal.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/reveal.js/3.0.0/css/theme/black.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/reveal.js/3.0.0/lib/css/zenburn.css">
    <link rel="stylesheet" href="reveal-style.css">
  </head>
  <body>
    <div class="reveal">
        <div class="slides">
            <section>
                <section>
                    <h1>Property-based testing</h1>
                    <h2 class="more">Using <a href="https://github.com/emil-e/rapidcheck/" target="_blank">RapidCheck</a></h2>
                </section>
                <section>
                    <p>Test properties instead of isolated cases</p>
                </section>
                <section>
                    <p>Shrink the input in case of failure</p>
                </section>
                <section>
                    <p class="quote">
                        for all <em>(x, y, ...)</em>
                        <br/>such that <em>precondition(x, y, ...)</em> holds
                        <br/><em>property(x, y, ...)</em> is true
                    </p>
                </section>
                <section>
                    <p>Example:</p>
                    <p class="quote">
                        for all <em>a and b integers</em>
                        <br/>such that <em>a &lt;= b</em> holds
                        <br/><em>a &lt;= mean(a,b) &lt;= b</em> is true
                    </p>
                </section>
                <section>
                    <p>Example:</p>
                    <p class="quote">
                        for all <em>array</em>
                        <br/><span class="fragment">- <em>sorted(array).all(current &lt;= next)</em></span>
                        <br/><span class="fragment">- <em>sorted(array).length == array.length</em></span>
                        <br/><span class="fragment">- <em>arity of(value in sorted(array)) == arity of(value in array)</em></span>
                        <br/><span class="fragment">are true</span>
                    </p>
                </section>
                <section>
                    <p>Use the scope of all possible inputs</p>
                </section>
            </section>
            <section>
                <section>
                    <h2>Agenda</h2>
                    <ol class="agenda">
                        <li>Test as debt</li>
                        <li>Limited coverage</li>
                        <li>Property-based testing in action</li>
                    </ol>
                </section>
            </section>
            <section>
                <section>
                    <h2>Agenda</h2>
                    <ol class="agenda">
                        <li class="active">Test as debt</li>
                        <li>Limited coverage</li>
                        <li>Property-based testing in action</li>
                    </ol>
                </section>
                <section>
                    <h3>Observation</h3>
                </section>
                <section>
                    <h4>Why do we tests?</h4>
                    <ul>
                        <li class="fragment">check for possible regressions,</li>
                        <li class="fragment">early bug detection,</li>
                        <li class="fragment">development logic,</li>
                        <li class="fragment">documentation, ...</li>
                    </ul>
                </section>
                <section>
                    <h4>Our faith in tests:</h4>
                    <ul>
                        <li class="fragment">up-to-date</li>
                        <li class="fragment">as simple as possible</li>
                        <li class="fragment">evolve with the code</li>
                        <li class="fragment">wide coverage</li>
                        <li class="fragment">an helper not an end in itself</li>
                    </ul>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
TEST(PrettyWriter, SetIndent) {
    StringBuffer buffer;
    PrettyWriter&lt;StringBuffer&gt; writer(buffer);
    writer.SetIndent('\t', 1);
    Reader reader;
    StringStream s(kJson);
    reader.Parse(s, writer);
    EXPECT_STREQ(
        "{\n"
        "\t\"hello\": \"world\",\n"
        "\t\"t\": true,\n"
        "\t\"f\": false,\n"
        "\t\"n\": null,\n"
        "\t\"i\": 123,\n"
        "\t\"pi\": 3.1416,\n"
        "\t\"a\": [\n"
        "\t\t1,\n"
        "\t\t2,\n"
        "\t\t3,\n"
        "\t\t-1\n"
        "\t],\n"
        "\t\"u64\": 1234567890123456789,\n"
        "\t\"i64\": -1234567890123456789\n"
        "}",
        buffer.GetString());
}
                    </code></pre>
                    <p class="vsmallnote">Example taken from <a href="https://github.com/miloyip/rapidjson/blob/master/test/unittest/prettywritertest.cpp" target="_blank" title="RapidJSON">RapidJSON</a></p>
                </section>
                <section>
                    <pre><code class="hljs" data-trim>
Title: Add an icon to the Firefox toolbar

Steps:

1. Right click on the toolbar, and select "Customize" from the
   dropdown menu (or go to main menu->View->Toolbar->Customize...).
2. A "Customize Toolbar" dialog box containing icons/spaces should
   be shown.
3. Select the Print icon using your mouse.
4. Drag the Print icon to the toolbar and place it to the right of
   the URL bar (between the end of the URL bar and the beginning of
   the search box).
5. Click "Done" to close the Customize Toolbar dialog box.
6. Click the Print icon you just added.

Expected Results:

1. The Print icon should be added to the toolbar in the place that
   you specified.
2. Clicking the Print icon should launch the Print dialog box.
                    </code></pre>
                    <p class="vsmallnote">Example taken from <a href="https://developer.mozilla.org/en-US/docs/Mozilla/QA/Test_Case_Writing_Primer" target="_blank" title="Mozilla QA">Mozilla QA</a></p>
                </section>
                <section>
                    <p>But what if it was:</p>
                    <ul>
                        <li class="fragment">costly to maintain</li>
                        <li class="fragment">limiting possible improvments</li>
                    </ul>
                </section>
                <section>
                    <h3>Statement</h3>
                </section>
                <section>
                    <h4>How would you test a JSON serializer given the following specification?</h4>
                    <p class="quote">Converts a value to JSON notation representing it.</p>
                    <p class="vsmallnote">Such specification is the one described by <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify" title="Mozilla Foundation web docs" target="_blank">Mozilla Foundation web docs</a>
                        for `JSON.stringify` of JavaScript.
                        The exhaustive specification is available on <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.12.3" title="ECMA-262" target="_blank">ECMA-262</a>.
                    </p>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
namespace json {
    
    class JsonObject;
    class JsonArray : public JsonObject;
    class JsonDictionary : public JsonObject;
    
    std::string stringify(JsonObject const&amp;);
    std::unique_ptr&lt;JsonObject&gt; parse(std::string const&amp;);
    
}//json
                    </code></pre>
                </section>
                <section>
                    <h3>Easy, isn't it?</h3>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
TEST(Stringify, ObjectWithTwoAttributesAandB) {
    auto instanceWithAandB = json::JsonDictionary {}
            .with("a", json::JsonInteger {4})
            .with("b", json::JsonInteger {7});
    
    ASSERT_EQ(
        std::string{"{\"a\":4,\"b\":7}"},
        json::stringify(instanceWithAandB));
}
                    </code></pre>
                </section>
                <section>
                    <h3>Not really...</h3>
                </section>
                <section>
                    <h4>Key ordering</h4>
                    <pre class="fragment"><code class="hljs" data-trim>{"a":4,"b":7}</code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>{"b":7,"a":4}</code></pre>
                    <ul>
                        <li class="fragment">storage: vector of pairs, map, hashmap...</li>
                        <li class="fragment">iteration</li>
                    </ul>
                </section>
                <section>
                    <h4>Deterministic</h4>
                    <ul>
                        <li class="fragment">address based in some way</li>
                        <li class="fragment">depend on previous calls</li>
                    </ul>
                </section>
                <section>
                    <h4>Ident</h4>
                    <pre class="fragment"><code class="hljs" data-trim>{"a"  :4   ,  "b"  :7     }</code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>{"a":4                    ,"b":7                    }</code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>
{
    "a" : 4,
    "b" : 7
}
                    </code></pre>
                    <ul>
                        <li class="fragment">optimizations: threads, processes...</li>
                    </ul>
                </section>
                <section>
                    <h4>Notation</h4>
                    <pre class="fragment"><code class="hljs" data-trim>{"a":4E0,"b":7E0}</code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>{"a":40E-1,"b":7E0}</code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>{"\u0061":4,"b":7}</code></pre>
                    <ul>
                        <li class="fragment">compact data</li>
                        <li class="fragment">unicode characters</li>
                    </ul>
                </section>
                <section>
                    <h3>Property</h3>
                </section>
                <section>
                    <h4>Any idea?</h4>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
namespace json {

    std::string stringify(JsonObject const&amp;);
    std::unique_ptr&lt;JsonObject&gt; parse(std::string const&amp;);
    
}//json
                    </code></pre>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(Stringify,
              StringifyThenParseIsIdentity,
              (json::JsonObject const&amp; elt))
{
    RC_ASSERT(*json::parse(json::stringify(elt)) == elt);
}
                    </code></pre>
                    <p class="vsmallnote">
                        Taking the object resulting from the conversion of the JsonObject to a string then back to a JsonObject
                        should be equivalent to take the original instance itself.
                    </p>
                </section>
            </section>
            <section>
                <section>
                    <h2>Agenda</h2>
                    <ol class="agenda">
                        <li>Test as debt</li>
                        <li class="active">Limited coverage</li>
                        <li>Property-based testing in action</li>
                    </ol>
                </section>
                <section>
                    <h3>Context</h3>
                </section>
                <section>
                    <p>Buggy code went through <a href="https://www.codingame.com/" target="_blank" title="CodinGame">CodinGame</a> tests</p>
                </section>
                <section>
                    <p>Two sets of tests:</p>
                    <ul>
                        <li>public set: available for development</li>
                        <li>private set: unknown tests</li>
                    </ul>
                </section>
                <section>
                    <h3>Statement</h3>
                </section>
                <section>
                    <h4>Aim:</h4>
                    <p>Find the position of a bomb in a limited number of guesses</p>
                </section>
                <section>
                    <h4>Each turn:</h4>
                    <ul>
                        <li class="fragment">receive: indication of the direction of the bomb</li>
                        <li class="fragment">send: new guess</li>
                    </ul>
                    <p class="fragment vsmallnote">grid size and current location known</p>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="bomb"></span></span>
                            <span class="office-on"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:
$: dimensions = (8, 8)
$: position   = (4, 4)
$: hint       = "DR"
                    </code></pre>
                </section>
                <section data-transition="fade-in fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"><span class="bomb"></span></span>
                            <span class="office-on2"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:
$: dimensions = (8, 8)
$: position   = (4, 4)
$: hint       = "DR"
                    </code></pre>
                </section>
                <section data-transition="fade-in fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="bomb"></span></span>
                            <span class="office-on"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:
$: dimensions = (8, 8)
$: position   = (6, 6)
$: hint       = "D"
                    </code></pre>
                </section>
                <section data-transition="fade-in fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on2"><span class="bomb"></span></span>
                            <span class="office-on"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:
$: dimensions = (8, 8)
$: position   = (6, 6)
$: hint       = "D"
                    </code></pre>
                </section>
                <section data-transition="fade-in fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"><span class="bomb"></span><span class="tux"></span></span>
                            <span class="office-off"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:
$: dimensions = (8, 8)
$: position   = (6, 7)
$: hint       = ""
                    </code></pre>
                </section>
                <section>
                    <h4>Sources</h4>
                    <p class="quote">The goal of this puzzle is to guess the coordinate of a bomb (line and column of a 2 dimensional array). You will have to make a guess at each step of the puzzle and adjust it from given feedbacks. Of course, you have a limited number of guess.</p>
                    <p class="vsmallnote">Taken from <a href="https://www.codingame.com/training/medium/shadows-of-the-knight-episode-1" target="_blank" title="CodinGame">CodinGame</a></p>
                    <p class="quote">Before each [guess], the heat-signature device will provide Batman with the direction of the bombs based on Batman current position.</p>
                    <p class="vsmallnote">Taken from <a href="https://www.codingame.com/training/medium/shadows-of-the-knight-episode-1" target="_blank" title="CodinGame">CodinGame</a></p>
                </section>
                <section>
                    <h3>Prototypes</h3>
                </section>
                <section>
                    <h4>Expected answer</h4>
                    <pre><code class="hljs cpp" data-trim>void locate_in_space(Space&amp; space, std::size_t rounds);</code></pre>
                </section>
                <section>
                    <h4>Helper to read from CodinGame</h4>
                    <pre><code class="hljs cpp" data-trim>
class Space
{
public:
    // dimensions of the grid
    std::size_t dimension_x() const;
    std::size_t dimension_y() const;
    // last known location
    std::size_t previous_x() const;
    std::size_t previous_y() const;
    // direction to the target (U / D, L / R)
    std::string const& hint() const;
    // is it the position of the target?
    bool solved() const;
    // update position
    void move(std::size_t x, std::size_t y);
};
                    </code></pre>
                </section>
                <section>
                    <h3>Implementation</h3>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
void locate_in_space(Space&amp; space, std::size_t rounds)
{
    std::size_t x_min = 0;
    std::size_t x_max = space.dimension_x();
    std::size_t y_min = 0;
    std::size_t y_max = space.dimension_y();
    for (std::size_t n {} ;
        n != rounds &amp;&amp; ! space.solved() ;
        ++n)
    {
        // content on next slide
    }
}
                    </code></pre>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
if (x_min >= x_max || y_min >= y_max) { return; }
std::size_t x0 = space.previous_x();
auto const&amp; hint = space.hint();
if (hint.back() == 'L')
{
    x_max = x0 -1;
    x0 = (x_max + x_min) /2;
}
else if (hint.back() == 'R')
{
    x_min = x0 +1;
    x0 = (x_max + x_min) /2;
}
// same for y...
space.move(x0, y0);
                    </code></pre>
                </section>
                <section>
                    <h3>Results</h3>
                </section>
                <section>
                    <h4>User tests</h4>
                    <img src="codingame-user-tests.png" alt="User tests results" />
                </section>
                <section>
                    <h4>Evaluation tests</h4>
                    <img src="codingame-eval-tests.png" alt="Evaluation tests results" />
                </section>
                <section>
                    <h3>Property</h3>
                </section>
                <section>
                    <h4>Test implementation using RapidCheck:</h4>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(ShadowsOfTheKnight, SAlwaysReachTarget, ())
{
    auto w = *inRange(1, 10000).as("grid width");
    auto h = *inRange(1, 10000).as("grid height");
    auto inRangeGen = apply(
        [](auto x, auto y) { return std::make_pair(x, y); }
        , inRange(0, w), inRange(0, h));
    auto current  = *inRangeGen.as("start position");
    auto solution = *inRangeGen.as("target position");
    Space space = SpaceBuilder{}
        .withDimension(w, h)
        .withSolution(solution.first, solution.second)
        .withCurrent(current.first, current.second).build();
    locate_in_space(space, std::max(h, w));
    RC_ASSERT(space.solved());
}
                    </code></pre>
                </section>
                <section>
                    <h4>Failed with output:</h4>
                    <pre><code class="hljs" data-trim>
Falsifiable after 9 tests and 5 shrinks

grid width:
8

grid height:
8

start position:
(0, 1)

target position:
(1, 0)
                    </code></pre>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-on"><span class="limit"></span></span>
                            <span class="office-on"><span class="bomb"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        <span class="bline">
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"><span class="limit"></span></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:                        Strategy:
$: dimensions = (8, 8)       $: xmin, xmax = (1, 8)
$: xmin, xmax = (0, 8)       $: ymin, ymax = (0, 0)
$: ymin, ymax = (0, 8)       $: position   = (4, 0)
$: position   = (0, 1)
$: hint       = "UR"
                    </code></pre>
                </section>
                <section data-transition="fade-in fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"><span class="limit"></span><span class="bomb"></span></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"><span class="tux"></span></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"><span class="limit"></span></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:                        Strategy:
$: dimensions = (8, 8)       $: Cannot suggest anything,
$: xmin, xmax = (1, 8)       $: it seems that
$: ymin, ymax = (0, 0)       $: there is no solution
$: position   = (4, 0)
$: hint       = "L"
                    </code></pre>
                </section>
                <section data-transition="fade-in fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"><span class="limit"></span><span class="bomb"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"><span class="limit"></span></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:                        Strategy:
$: dimensions = (8, 8)       $: xmin, xmax = (1, 3)
$: xmin, xmax = (1, 8)       $: ymin, ymax = (0, 1)
$: ymin, ymax = (0, 1)       $: position   = (2, 0)
$: position   = (4, 0)
$: hint       = "L"
                    </code></pre>
                </section>
                <section data-transition="fade-in fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"><span class="limit"></span><span class="bomb"></span></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"><span class="limit"></span></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:                        Strategy:
$: dimensions = (8, 8)       $: xmin, xmax = (1, 2)
$: xmin, xmax = (1, 3)       $: ymin, ymax = (0, 1)
$: ymin, ymax = (0, 1)       $: position   = (1, 0)
$: position   = (2, 0)
$: hint       = "L"
                    </code></pre>
                </section>
                <section data-transition="fade-in fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"><span class="limit"></span><span class="bomb"></span><span class="tux"></span></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"><span class="limit"></span></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:
$: dimensions = (8, 8)
$: xmin, xmax = (1, 2)
$: ymin, ymax = (0, 1)
$: position   = (1, 0)
$: hint       = ""
                    </code></pre>
                </section>
            </section>
            <section>
                <section>
                    <h2>Agenda</h2>
                    <ol class="agenda">
                        <li>Test as debt</li>
                        <li>Limited coverage</li>
                        <li class="active">Property-based testing in action</li>
                    </ol>
                </section>
                <section>
                    <h3>Bounded output</h3>
                </section>
                <section>
                    <p class="quote">
                        for all a and b integers,
                        <br/>the average of a and b is between a and b
                    </p>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(Average, ShouldBeBetweenAAndB,
              (int a, int b))
{
    RC_PRE(a &lt;= b);
    RC_ASSERT(a &lt;= average(a,b) &amp;&amp; average(a,b) &lt;= b);
}
                    </code></pre>
                    <p class="vsmallnote">Assumptions concerning the range in which will be the output</p>
                </section>
                <section>
                    <h3>Limited set of inputs</h3>
                </section>
                <section>
                    <p class="quote">
                        for all (a, b, c) strings,
                        <br/>b is a substring of the concatenation of a, b and c
                    </p>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(Contains,
              ShouldBeTrueOnAllStringsBuiltAroundPattern,
              (std::string a,
               std::string b,
               std::string c))
{
    RC_ASSERT(contains(b, a + b + c));
}
                    </code></pre>
                    <p class="vsmallnote">Subset of inputs having a trivial answer</p>
                </section>
                <section>
                    <h3>Compare to another implementation</h3>
                </section>
                <section>
                    <p class="quote">
                        for all data - sorted array of integers - and n - integer,
                        <br/>the result of the linear search of n in data is the same as the one of the binary search of n in data
                    </p>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(FindDicho, ShouldBeSameAsSimpler,
              (std::vector&lt;int&gt; data, int n))
{
    std::sort(data.begin(), data.end());
    RC_ASSERT(find_dicho(data, n) == find_linear(data, n));
}
                    </code></pre>
                    <p class="vsmallnote">Another algorithm - in general, simpler to implement - exists</p>
                </section>
                <section>
                    <h3>Combination of functions</h3>
                </section>
                <section>
                    <h4>Round trip</h4>
                </section>
                <section>
                    <p class="quote">
                        for all n integer,    
                        <br/>the integer equivalent of the roman representation of n is itself
                    </p>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(RomanConversion, FromOfToIsIdentity,
              (int n))
{
    RC_ASSERT(from_roman(to_roman(n)) == n);
}
                    </code></pre>
                    <p class="vsmallnote">Encode and decode pair of functions</p>
                </section>
                <section>
                    <h4>More general combination</h4>
                </section>
                <section>
                    <p class="quote">
                        for all a and b integers,       
                        <br/>lcm(a,b) * gcd(a,b) = a * b
                    </p>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(LcmGcd, RelationBetweenLcmAndGcd,
              (int a, int b))
{
    RC_ASSERT(lcm(a,b) * gcd(a,b) = a * b);
}
                    </code></pre>
                    <p class="vsmallnote">Some properties hold given a combination of multiple functions</p>
                </section>
                <section>
                    <h3>Commands based</h3>
                </section>
                <section>
                    <p>Why  don't we test that the code follow the specifications?</p>
                </section>
                <section>
                    <p>Check pre-conditions before running a command</p>
                </section>
                <section>
                    <p>Check post-conditions after</p>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
struct PlayCommand : MusicPlayerCommand
{
    void checkPreconditions(MPModel const&amp; /*m*/) const override {}
    void apply(MPModel&amp; m) const override { m.is_playing = true; }
    void run(MPModel const&amp; /*m*/, MusicPlayer&amp; p) const override
    {
        p.play();
        RC_ASSERT(p.is_playing());
    }
    void show(std::ostream&amp; os) const override { os &lt;&lt; "Play"; }
};
                    </code></pre>
                    <p class="vsmallnote">After running play, player must be in playing mode</p>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>

struct NextCommand : MusicPlayerCommand
{
    void checkPreconditions(MPModel const&amp; /*m*/) const override {}
    void apply(MPModel&amp; m) const override {}
    void run(MPModel const&amp; m, MusicPlayer&amp; p) const override
    {
        auto track_before = p.track_name();
        p.next();
        RC_ASSERT(m.is_playing == p.is_playing());
        if (m.num_tracks == 1)
            RC_ASSERT(track_before == p.track_name());
        else
            RC_ASSERT(track_before != p.track_name());
    }
    void show(std::ostream&amp; os) const override { os &lt;&lt; "Next"; }
};
                    </code></pre>
                    <p class="vsmallnote">Next always moves to a different song for multiple tracks playlists</p>
                </section>
            </section>
            <section>
                <h2>Questions?</h2>
                <p><a href="https://github.com/dubzzz/property-based-testing-cpp" title="Talk materials &amp; sources" target="_blank">Talk materials &amp; sources</a></p>
                <p><a href="https://www.youtube.com/watch?v=hXnS_Xjwk2Y" title="John Hughes - Don't Write Tests" target="_blank">John Hughes - Don't Write Tests</a></p>
                <p><a href="https://labs.spotify.com/2015/06/25/rapid-check/" title="Generating test cases so you don’t have to" target="_blank">Generating test cases so you don’t have to</a></p>
            </section>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/reveal.js/3.0.0/lib/js/head.min.js"></script>
    <script src="https://cdn.jsdelivr.net/reveal.js/3.0.0/js/reveal.min.js"></script>
    <script src="reveal-config.js"></script>
    <script src="reveal-mouse.js"></script>
  </body>
</html>